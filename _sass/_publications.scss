// ============================================================================
// Publication List
// ============================================================================

.publist {
  list-style: none;
  padding-left: var(--pad-l);
  padding-right: var(--pad-l);
  text-align: justify;
  text-justify: inter-word;
}

// Publication item structure
.publist .pub {
  align-items: start;
  column-gap: 0.75rem;
  display: grid;
  grid-template-columns: 4ch 1fr;
  margin-bottom: 0.75rem;
  row-gap: 0.25rem;
}

// Numbering
.publist .pub::before {
  content: attr(data-num) ".";
  grid-column: 1;
  grid-row: 1;
  justify-self: end;
}

#publications .publist.high-only .pub:not([data-priority="high"]):not([data-priority="pinned"]) {
  display: none;
}

.publist.high-only .pub::before {
  content: "â€“";
  justify-self: center;
}

// Layout
.publist .pub .pub-main,
.publist .pub .pub-tags,
.publist .pub .pub-notes {
  grid-column: 2;
}

// ============================================================================
// Individual Publication
// ============================================================================

.pub {
  margin: 0 0 0.75rem 0;
}

.pub.dim {
  opacity: 0.25;
  transition: opacity 160ms ease;
}

// ============================================================================
// Publication Content
// ============================================================================

// Main content area
.pub-main {
  -moz-hyphens: auto;
  -ms-hyphens: auto;
  -webkit-hyphens: auto;
  hyphens: auto;
  line-height: 1.45;
}

// Author highlighting
.pub-authors .me {
  text-decoration: underline;
  text-underline-offset: 2px;
}

// Individual lines
.pub-line {
  padding-bottom: var(--pad-s);
  display: inline;
}

// Title styling
.pub-title {
  color: #{$dark-blue};
}

// ============================================================================
// Identifiers (DOI, PMID, PMCID)
// ============================================================================

.pub-id {
  display: inline-block;
  margin-right: 1ch;
  white-space: nowrap;
}

.pub-id a {
  display: inline-flex;
  align-items: baseline;
  gap: 0;
}

.pub-id-full {
  display: inline;
}
.pub-id-short {
  display: none;
}

// ============================================================================
// Additional Content
// ============================================================================

// Notes (impact, role, etc.)
.pub-notes {
  color: #{$slate-600};
  font-size: 0.9em;
  font-style: italic;
  margin: var(--pad-s) 0;
  opacity: 0.9;
}

// ============================================================================
// Keyword Tags
// ============================================================================

.pub-tags {
  margin: 0;
}

.tag {
  border: 1px solid #{$slate-200};
  border-radius: #{$round-m};
  cursor: pointer;
  display: inline-block;
  font-size: 0.8rem;
  margin: 0 0.35rem 0 0;
  padding: 0.15em 0.50em;

  &:focus-visible {
    outline: 2px solid #888;
    outline-offset: 2px;
  }
}

.tag.is-active {
  outline: 2px solid var(--active);
  outline-offset: 2px;
}

// ============================================================================
// Priority Toggle Switch
// ============================================================================

.priority-toggle {
  margin: 0 0 0.75rem 0;
}

.switch {
  align-items: center;
  cursor: pointer;
  display: inline-flex;
  gap: 0.5rem;
  user-select: none;
}

// Hide native checkbox but keep accessible
.switch input {
  height: 0;
  opacity: 0;
  position: absolute;
  width: 0;
}

// Switch track
.switch-ui {
  --h: 1.5rem;
  --pad: 2px;
  --thumb: calc(var(--h) - 2 * var(--pad));
  --w: 2.5rem;
  background: #{$slate-300};
  border-radius: var(--h);
  display: inline-block;
  height: var(--h);
  position: relative;
  transition: background 0.18s ease;
  width: var(--w);
}

// Switch thumb
.switch-ui::after {
  background: #{$white};
  border-radius: 50%;
  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
  content: "";
  height: var(--thumb);
  left: var(--pad);
  position: absolute;
  top: var(--pad);
  transition: transform 0.18s ease;
  width: var(--thumb);
}

// Checked state
.switch input:checked + .switch-ui {
  background: var(--fg-muted);
}

.switch input:checked + .switch-ui::after {
  transform: translateX(calc(var(--w) - var(--h)));
}

// Keyboard focus
.switch input:focus-visible + .switch-ui {
  box-shadow: 0 0 0 3px var(--bg-color), 0 0 0 5px var(--link);
}

// Switch text labels
.switch-text {
  color: var(--fg-color);
  font-size: 0.9rem;
}

.switch-text .on {
  display: none;
}

.switch input:checked ~ .switch-text .off {
  display: none;
}

.switch input:checked ~ .switch-text .on {
  display: inline;
}

// ============================================================================
// Media Queries
// ============================================================================

@media (min-width: #{$bp-m}) {
  .pub-line {
    display: block;
  }
}

@media (max-width: #{$bp-s}) {
  .pub-id-full {
    display: none;
  }
  .pub-id-short {
    display: inline;
  }
  .pub-id {
    margin-right: 0.6ch;
  }
}

@media (prefers-color-scheme: dark) {
  .tag {
    opacity: 0.85;
  }
}

@media (prefers-reduced-motion: reduce) {
  * {
    transition: none !important;
  }
}